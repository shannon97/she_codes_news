{% extends 'base.html' %}
{% load static %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'news/styles.css' %}">

    <!-- <style>

        body {
            display: flex;
            flex-direction: row;
        }

        #story-wrapper {
            flex: 1;
            margin: 10px;
            padding: 10px;
        }

        header {
            display: flex;
            flex-basis: 20%;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            padding: 10px;
            margin: 10px;
            box-sizing: border-box;
            border: 1px solid rgba(245, 245, 245, 0.20);
            background-color: rgb(229, 218, 218, 0.5);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }

        nav {
            /* flex-basis: 30%; */
            display: flex;
            align-items: start;
            font-size: 25px;
        }

        #story-content {
            margin-top: 20px;;
        }
    </style> -->

    <style>
    * {
        border: 1px solid red;
    }
    </style>

    {% endblock %}

{% block content %}

<h2>{{ story.title }}</h2>

    <h3><a href="{% url 'users:myAccount' story.author.id %}">Author: {{ story.author }}</a></h3>
    <p class="auth-pub">Posted on: {{ story.pub_date|date:'d M y' }}</p>

<section id="story-wrapper">

    <div id="story-content">
        {% if story.story_image %}
        <img src="{{story.story_image}}">
        {% else %}
        <img src="https://picsum.photos/600">
        {% endif %}
    </div>

    <div id="story-text">
        {{ story.content|linebreaks }}
    </div>

</section>

    {% if request.user.is_authenticated and user == story.author %}
        <a href="{% url 'news:editStory' pk=story.pk %}" class="btn_edit_story">Edit Story</a>
    {% endif %}

    {% if request.user.is_authenticated and user == story.author %}
    <form method="post" action="{% url 'news:editStory' story.id %}">
        {% csrf_token %}
        <input type="submit" name="delete" value="Delete Story">
    </form>
    {% endif %}


<div id="comments_form">
    {% if story.id %}
    <form method="post" action="{% url 'news:newComment' story.id %}">
        {% csrf_token %}
        {{ form.as_p }}
        {% if request.user.is_authenticated %}
        <input class="btn_add_comment" type="submit" value="Add Comment">
        {% endif %}
    </form>
    {% endif %}
</div>

<div id="comment_section">
    <h4>Comments:</h4>
    {% for comment in story.comments.all %}
        <p>{{ comment.author }} commented on {{comment.created_on|date:'d M Y'}}:<br>
        {{ comment.body }}</p>

    {% empty %}
        <p>There are no comments on this story yet!</p>
    {% endfor %}
</div>



{% endblock %}
